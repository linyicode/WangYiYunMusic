<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>网易云音乐解析</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
		<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
		<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
		<style>
			.mp3{
			display : none;
			}
		</style>
	</head>
	<body>
		
		<nav class="navbar navbar-expand-sm bg-light">
		      <a class="nav-link">网易云音乐解析</a>
		</nav>
		
		<div class="container">
			<div class="card mt-5">
			    <div class="card-body">
			      <h4 class="card-title">请输入网易云音乐链接</h4>
			      <p class="card-text" style="color:red;">目前无法解析网易云版权歌曲!</p>
					<div class="input-group mb-3 mt-3">
					    <input type="text" name="url" id="url" class="form-control" placeholder="例如:https://music.163.com/#/song?id=1847250546">
					  </div>
					 <button type="button" id="button" class="btn btn-primary">解析</button>
			    </div>
			  </div>
		 <div id="mp3" class="mp3 mt-5">
		 	<div class="card">
    			<div class="card-body" id="runmp3">
    			</div>
  			</div>
		 </div>
		</div>
	</body>
	<script>
		$("#button").click(function(){
			var idurl = $("#url").val();
			var id = idurl.split("="); 
			var url = "./GetUrlServlet?id="+id[1];
			htmlobj = $.ajax({url:url,async:false});
			var musicurl = htmlobj.responseText;
			$("#runmp3").html("<audio src="+musicurl+" controls='controls' class='mt-2'><p>当前浏览器不支持audio</p></audio><p class='mt-3'>音乐地址: "+musicurl+"</p>");
			$("#mp3").css("display","block");
		});
	</script>
</html>